jQuery(document).ready(function(a){function b(c,d){a('.toplevel_page_content-mask #wpbody .wrap > h2').after('<div class="cm-message notice notice-'+c+'"><p>'+d+'</p></div>')}a('#content_mask_meta_box [name="content_mask_method"]').on('change',function(){'download'==a(this).val()?a('.cm-expiration-div').fadeIn():a('.cm-expiration-div').fadeOut()}),a('#content-mask-list td.cache-expires').on('click','a',function(){a('.cm-message').remove();var c=a(this),d=c.closest('tr').find('td.mask-url a').attr('href'),e=c.attr('data-transient'),f=c.closest('tr').attr('data-attr-id'),g=c.closest('tr').find('td.mask-url a').text();expiration=c.attr('data-expiration'),$methodDiv=c.closest('tr').find('td.method div'),expirationReadable=c.attr('data-expiration-readable'),$methodDiv.addClass('cm-reloading');var h={action:'refresh_cm_transient',postID:f,expiration:expiration,transient:e,maskURL:d};return a.post(ajaxurl,h,function(i){a('.cm-message').remove();var j;200==i.status?(a('.content-mask-admin-table-body tr td.cache-expires').each(function(){a(this).closest('tr').find('td.mask-url a').text()==g&&a(this).find('.transient-expiration').text(expirationReadable)}),j='info'):(400==i.status||403==i.status)&&(j='error'),$methodDiv.removeClass('cm-reloading'),b(j,i.message)},'json'),!1}),a('#content-mask-list .content-mask-admin-table-body, #content-mask-list .column-content-mask').on('click','.method svg, .cm-method svg',function(){var c=a(this),d=c.attr('class');if(c.closest('td').hasClass('method'))var e=c.closest('tr').attr('data-attr-id'),f=c.closest('tr');else var e=c.closest('tr').attr('id').replace('post-',''),f=c.closest('.cm-method');var g=f.attr('data-attr-state'),h='enabled'==g?'disabled':'enabled';c.closest('div').attr('class','cm-reloading');a.post(ajaxurl,{action:'toggle_content_mask',postID:e,newState:h,currentState:g},function(j){a('.cm-message').remove();var k;200==j.status?(c.attr('class',d),f.attr('data-attr-state',h).toggleClass('disabled enabled'),k='info'):(400==j.status||403==j.status)&&(k='error'),c.closest('div').removeClass('cm-reloading'),b(k,j.message)},'json')}),a('#content-mask-options .cm_checkbox').on('click','.cm_check',function(){var c=a(this).closest('.cm_checkbox'),d=c.attr('data-attr');c.closest('.cm_option').addClass('cm-reloading'),a.post(ajaxurl,{action:'toggle_content_mask_tracking',currentState:d},function(f){a('.cm-message').remove(),200==f.status?classes='info':(400==f.status||403==f.status)&&(classes='error'),a('#content-mask-list').removeClass('tracking-enabled tracking-disabled'),a('#content-mask-list').addClass('tracking-'+f.newState),c.closest('.cm_option').removeClass('cm-reloading'),c.closest('.cm_option').find('.cm_value').text(f.newState),c.attr('data-attr',f.newState),b(classes,f.message)},'json')}),a('#content_mask_enable').is(':checked')&&a('#postdivrich').css({height:0,overflow:'hidden'}).addClass('hide-overflow'),a('#content_mask_enable').click(function(){a(this).is(':checked')||a('#postdivrich').animate({height:416,overflow:'visible'}).removeClass('hide-overflow')})});