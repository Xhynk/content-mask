jQuery(document).ready(function(a){function b(c,d){a('.content-mask-admin-table').before('<div class="cm-message notice notice-'+c+'"><p>'+d+'</p></div>')}a('#content_mask_meta_box [name="content_mask_method"]').on('change',function(){'download'==a(this).val()?a('.cm-expiration-div').fadeIn():a('.cm-expiration-div').fadeOut()}),a('.content-mask-admin-table-body td.cache').on('click','a',function(){a('.cm-message').remove();var c=a(this),d=c.closest('tr').find('td.view a').attr('href'),e=c.attr('data-transient'),f=c.closest('tr').attr('data-attr-id'),g=c.closest('tr').find('td.url a').text();expiration=c.attr('data-expiration'),$methodDiv=c.closest('tr').find('td.method div'),expirationReadable=c.attr('data-expiration-readable'),$methodDiv.addClass('cm-reloading');var h={action:'refresh_cm_transient',postID:f,expiration:expiration,transient:e,maskURL:d};return a.post(ajaxurl,h,function(i){a('.cm-message').remove();var j;200==i.status?(a('.content-mask-admin-table-body tr td.cache').each(function(){a(this).closest('tr').find('td.url a').text()==g&&a(this).find('.transient-expiration').text(expirationReadable)}),j='info'):(400==i.status||403==i.status)&&(j='error'),$methodDiv.removeClass('cm-reloading'),b(j,i.message)},'json'),!1}),a('.content-mask-admin-table-body, .column-content-mask').on('click','.method svg, .cm-method svg',function(){var c=a(this),d=c.attr('class');if(c.closest('td').hasClass('method'))var e=c.closest('tr').attr('data-attr-id'),f=c.closest('tr');else var e=c.closest('tr').attr('id').replace('post-',''),f=c.closest('.cm-method');var g=f.attr('data-attr-state'),h='enabled'==g?'disabled':'enabled';c.closest('div').attr('class','cm-reloading');a.post(ajaxurl,{action:'toggle_content_mask',postID:e,newState:h,currentState:g},function(j){a('.cm-message').remove();var k;200==j.status?(c.attr('class',d),f.attr('data-attr-state',h).toggleClass('disabled enabled'),k='info'):(400==j.status||403==j.status)&&(k='error'),c.closest('div').removeClass('cm-reloading'),b(k,j.message)},'json')}),a('#content_mask_enable').is(':checked')&&a('#postdivrich').css({height:0,overflow:'hidden'}).addClass('hide-overflow'),a('#content_mask_enable').click(function(){a(this).is(':checked')||a('#postdivrich').animate({height:416,overflow:'visible'}).removeClass('hide-overflow')})});