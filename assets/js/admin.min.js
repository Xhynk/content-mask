jQuery(document).ready(function(r){function d(t,e){r("#content-mask-message").remove(),r("body").append('<div id="content-mask-message"><div class="content-mask-message-content '+t+'">'+e+"</div></div>"),setTimeout(function(){r("#content-mask-message").fadeOut(function(){r(this).remove()})},1500)}r('#content_mask_meta_box [name="content_mask_method"]').on("change",function(){"download"==r(this).val()?r(".content-mask-expiration-div").fadeIn():r(".content-mask-expiration-div").fadeOut()}),r("#content_mask_enable").is(":checked")&&r("#postdivrich").css({height:0,overflow:"hidden"}).addClass("hide-overflow"),r("#content-mask-settings").on("click",".content-mask-check",function(){r(this).is(":checked")||(r("#postdivrich").animate({height:416,overflow:"visible"}).removeClass("hide-overflow"),r(".gutenberg").addClass("content-mask-unchecked"),r(".gutenberg .edit-post-visual-editor, .gutenberg .edit-post-text-editor").fadeIn(),r(".content-mask-notice").fadeOut())}),r("#content-mask-pages").on("click",".refresh-transient",function(){r(".content-mask-message").remove();var t=r(this),a=t.closest("tr").find(".info .meta a").text(),e=t.attr("data-transient"),n=t.closest("tr").attr("data-attr-id"),s=t.attr("data-expiration"),o=t.closest("tr").find("td.method div"),i=t.attr("data-expiration-readable");o.addClass("content-mask-reloading");var c={action:"refresh_transient",postID:n,expiration:s,transient:e,maskURL:a};return r.post(ajaxurl,c,function(t){var e;r(".content-mask-message").remove(),200==t.status?(r("#content-mask-pages tr td.status").each(function(){r(this).closest("tr").find(".info .meta a").text()==a&&r(this).find(".transient-expiration").removeClass("expired").text(i)}),e="info"):400!=t.status&&403!=t.status||(e="error"),o.removeClass("content-mask-reloading"),d(e,t.message)},"json"),!1}),r("#content-mask-pages").on("click",".remove-mask",function(){var t=r(this);r(this).closest("tr");return function(t,e,a){r("#content-mask-modal-container").remove();var n='<div id="content-mask-modal-container"><div class="content-mask-modal '+a+'"><svg class="icon content-mask-svg svg-trash" title="Delete Mask" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg><h2>'+e+'</h2><p>Remove this Content Mask?</p><button data-intent="confirm" data-action="delete-mask" data-id="'+t+'">Yes</button><button data-intent="cancel">No</button></div></div>';r("body").addClass("blur"),r("body").append(n)}(t.closest("tr").attr("data-attr-id"),t.closest("tr").find(".info strong").text(),"warning"),!1}),r("body").on("click",'[data-intent="cancel"]',function(){return r("body").removeClass("blur"),r("#content-mask-modal-container").fadeOut(function(){r(this).remove()}),!1}),r("body").on("click",'[data-action="delete-mask"]',function(){var t=r(this).attr("data-id"),a=r("#content-mask-pages").find('tr[data-attr-id="'+t+'"]'),e={action:"delete_content_mask",postID:t};return r("body").removeClass("blur"),r("#content-mask-modal-container").fadeOut(function(){r(this).remove(),a.addClass("deleting")}),r.post(ajaxurl,e,function(t){var e;200==t.status?(a.fadeOut(),e="info"):400!=t.status&&403!=t.status||(a.addClass("deleting"),e="error"),d(e,t.message)},"json"),!1}),r("#content-mask-pages, #the-list .column-content-mask").on("click",".method div, .content-mask-method svg",function(){var a,t,n=r(this),s=n.attr("class");n.closest("td").hasClass("method")?(t=n.closest("tr").attr("data-attr-id"),a=n.closest("tr")):(t=n.closest("tr").attr("id").replace("post-",""),a=n.closest(".content-mask-method"));var e=a.attr("data-attr-state"),o="enabled"==e?"disabled":"enabled";n.attr("class","content-mask-reloading");var i={action:"toggle_content_mask",postID:t,newState:o,currentState:e};r.post(ajaxurl,i,function(t){var e;200==t.status?(n.attr("class",s),a.attr("data-attr-state",o).toggleClass("disabled enabled"),e="info"):400!=t.status&&403!=t.status||(e="error"),n.closest("div").removeClass("content-mask-reloading"),d(e,t.message)},"json")}),r(".content-mask-admin .content-mask-checkbox").on("click",".content-mask-check",function(){var e=r(this),a=e.closest("label"),t=a.attr("data-attr"),n=a.find('input[type="checkbox"]').attr("name"),s=a.find(".display-name").attr("aria-label").replace("Enable ",""),o={action:"toggle_content_mask_option",optionName:n,currentState:t,optionDisplayName:s};e.addClass("content-mask-reloading"),r.post(ajaxurl,o,function(t){200==t.status?classes="info":400!=t.status&&403!=t.status||(classes="error"),"content_mask_tracking"==n&&(r("#content-mask-list").removeClass("tracking-enabled tracking-disabled"),r("#content-mask-list").addClass("tracking-"+t.newState)),e.removeClass("content-mask-reloading"),e.closest(".content-mask-option").find(".content-mask-value").text(t.newState),a.attr("data-attr",t.newState),d(classes,t.message)},"json")}),r("#content-mask-advanced button").on("click",function(){var t=r(this),e=t.closest(".option").find(".code-edit-wrapper"),a=t.attr("data-editor"),n=window[a].codemirror.getValue(),s=t.text().replace("Save ","");target=t.attr("data-target");var o={action:"update_content_mask_option",option:target,value:n,label:s};e.addClass("loading"),r.post(ajaxurl,o,function(t){200==t.status?classes="info":400!=t.status&&403!=t.status||(classes="error"),d(classes,t.message),e.removeClass("loading"),e.addClass("saved"),setTimeout(function(){e.removeClass("saved")},1500)},"json")}),r("#content-mask #load-more-masks").on("click",function(){var e=r("#content-mask-pages").find("tbody");e.append('<tr class="content-mask-temp"><td><div class="content-mask-spinner"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div></td></tr>');var t={action:"load_more_pages",offset:e.find("tr").length};r.post(ajaxurl,t,function(t){r(".content-mask-temp").remove(),e.append(t.message),d("info","Loading Completed"),null!=t.notice&&"no remaining"==t.notice&&r("#load-more-masks").fadeOut(function(){r(this).remove()})},"json")}),r("#content-mask nav").on("click","li",function(){var t=r(this).find("a"),e=t.attr("data-target");r("#content-mask nav li").each(function(){r(this).find("a").removeClass("active")}),t.addClass("active"),r("#content-mask .content-mask-panel.active").fadeOut(function(){r(this).removeClass("active"),r("#"+e).fadeIn(function(){r(this).addClass("active")})})}),r("#mobile-nav-toggle").on("click",function(){r("#header-nav").slideToggle()})}),jQuery(window).load(function(){jQuery(document).ready(function(t){if(0<t(".content-mask-enabled-page .override-gutenberg-notice").length){var e='<div class="components-notice notice notice-alt content-mask-notice notice-info">'+t(".override-gutenberg-notice").html()+"</div>";t(".components-notice-list").prepend(e)}})});